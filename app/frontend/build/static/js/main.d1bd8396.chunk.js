(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(74)},69:function(e,t){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(35),i=a.n(s),o=a(1),c=a(3),r=a(4),d=a(6),m=a(5),f=a(7),u=a(36),v=a.n(u),g=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e="modal";return this.props.active&&(e="modal is-active"),n.a.createElement("div",{className:e},n.a.createElement("div",{className:"modal-background",onClick:this.props.close}),n.a.createElement("div",{className:"modal-content"},this.props.children),n.a.createElement("button",{onClick:this.props.close,className:"modal-close is-large","aria-label":"close"}))}}]),t}(n.a.Component),h=a(37),p=a.n(h),E=(a(33),a(34),a(73),function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("table",{className:"table is-fullwidth tableFixedHead is-hoverable is-narrow is-striped"},n.a.createElement("tbody",null,this.props.files.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",{width:"30%",onClick:function(){e.props.openFile(t.path)}},n.a.createElement("a",null,t.name)),n.a.createElement("td",{width:"25%"},p()(t.timestamp,"YYYY-MM-DD HH:mm:ss.SSSSSS").format("MM/DD/YYYY hh:mm a")),n.a.createElement("td",{width:"45%"},"loading"!==t.tags&&n.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},Object.keys(t.tags).map(function(a){return n.a.createElement("div",{key:a,className:"control"},n.a.createElement("div",{className:"tags are-small has-addons"},n.a.createElement("span",{className:"tag is-info"},a),n.a.createElement("a",{onClick:function(){e.props.removeTag(t.id,a)},className:"tag is-delete"})))}),n.a.createElement("div",{className:"control"},n.a.createElement("div",{className:"tags are-small"},n.a.createElement("a",{className:"tag is-small",onClick:function(){e.props.activateModal(t.id)}},n.a.createElement("span",{className:"icon is-small"},n.a.createElement("i",{className:"fas fa-plus"})))))),"loading"===t.tags&&n.a.createElement("div",{className:"level"},n.a.createElement("div",{className:"level-item"},n.a.createElement("progress",{className:"progress is-small is-info"})))))})),n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{width:"30%"},"File Name"),n.a.createElement("th",{width:"25%"},"Date Added"),n.a.createElement("th",{width:"45%"},"Fabels"))))}}]),t}(n.a.Component)),w=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openFile=function(e){window.socket&&window.socket.emit("openFile",e,function(e){console.log(e)})},a.activateModal=function(e){a.setState({modal:Object(o.a)({},a.state.modal,{active:!0,fileId:e})})},a.addTag=function(e,t){if(console.log(e),console.log(t),a.closeModal(),window.socket){var l=Object(o.a)({},a.state.files[e],{tags:"loading"}),n=Object(o.a)({},a.state.files);n[l.id]=l,a.setState({files:n}),window.socket.emit("addTag",e,t,function(t){console.log(t),t.payload&&((n=Object(o.a)({},a.state.files))[e]=t.payload,a.setState({files:n}))})}},a.removeTag=function(e,t){if(console.log(e),console.log(t),window.socket){var l=Object(o.a)({},a.state.files[e],{tags:"loading"}),n=Object(o.a)({},a.state.files);n[l.id]=l,a.setState({files:n}),window.socket.emit("removeTag",e,t,function(t){console.log(t),t.payload&&((n=Object(o.a)({},a.state.files))[e]=t.payload,a.setState({files:n}))})}},a.closeModal=function(){a.setState({modal:Object(o.a)({},a.state.modal,{active:!1,textField:"",fileId:-1})})},a.toggleTag=function(e){var t=new Set(a.state.clickedTags);t.has(e)?t.delete(e):t.add(e),a.setState({clickedTags:t})},a.onDragOver=function(e){e.preventDefault(),a.setState({fileModal:Object(o.a)({},a.state.fileModal,{active:!0})})},a.onDropped=function(e){e.preventDefault(),a.setState({fileModal:Object(o.a)({},a.state.fileModal,{active:!1})}),window.socket&&window.socket.emit("openFileDialog",function(e){console.log(e)})},a.createFileDialog=function(){window.socket&&window.socket.emit("openFileDialog",function(e){console.log(e)})},a.updateModalInputValue=function(e){a.setState({modal:Object(o.a)({},a.state.modal,{textField:e.target.value})})};Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now(),Date.now();return a.state={files:{},modal:{active:!1,fileId:-1,textField:""},fileModal:{active:!1},clickedTags:new Set},a}return Object(f.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=v()();t.on("connect",function(){console.log("connected"),window.socket=t,t.emit("getAllFiles",function(a){console.log(a),0===a.error&&e.setState({files:a.payload}),t.on("newFile",function(t){var a=Object(o.a)({},e.state.files);t.tags="loading",a[t.id]=t,e.setState({files:a})}),t.on("updateFile",function(t){var a=Object(o.a)({},e.state.files);a[t.id]=t,e.setState({files:a})}),t.on("removeFile",function(t){if(t in e.state.files){var a=Object(o.a)({},e.state.files);delete a[t],e.setState({files:a})}})})})}},{key:"render",value:function(){var e=this,t=new Set,a=[];for(var l in this.state.files){a.push(parseInt(l));var s=this.state.files[l].tags;if("loading"!==s)for(var i=0,o=Object.keys(s);i<o.length;i++){var c=o[i];t.add(c)}}a.sort(function(e,t){return e-t}),a=a.reverse();var r=[];t.forEach(function(t,a,l){var n="is-white";e.state.clickedTags.has(t)&&(n="is-dark"),r.push({tag:t,class:n})});for(var d=[],m=0;m<a.length;m++){var f=a[m];f=f.toString();var u=this.state.files[f],v=u.tags,h=!1;if("loading"!==v){var p=!0,w=!1,b=void 0;try{for(var k,D=this.state.clickedTags[Symbol.iterator]();!(p=(k=D.next()).done);p=!0){if(!(k.value in v)){h=!0;break}}}catch(N){w=!0,b=N}finally{try{p||null==D.return||D.return()}finally{if(w)throw b}}}else if(0!==this.state.clickedTags.size)continue;h||d.push(u)}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container is-fluid",onDrop:this.onDropped,onDragOver:this.onDragOver},n.a.createElement("section",{className:"hero is-primary is-bold"},n.a.createElement("div",{className:"hero-body"},n.a.createElement("div",{className:"container"},n.a.createElement("nav",{className:"level"},n.a.createElement("div",{className:"level-left"},r.length>0&&n.a.createElement("h1",{className:"title"},"Filter by Fabels:"),0===r.length&&n.a.createElement("h1",{className:"title"},"Fabel")),n.a.createElement("div",{className:"level-right"},n.a.createElement("div",{className:"level-item"},n.a.createElement("a",{class:"button is-rounded",onClick:this.createFileDialog},n.a.createElement("span",{className:"icon"},n.a.createElement("i",{class:"fas fa-plus"})),n.a.createElement("span",null,"Add Files"))))),n.a.createElement("div",{className:"control"},n.a.createElement("div",{className:"tags are-small"},r.map(function(t){return n.a.createElement("a",{key:t.tag,onClick:function(){e.toggleTag(t.tag)},className:t.class+" tag"},t.tag)})))))),n.a.createElement("div",{className:"box"},d.length>0&&n.a.createElement(E,{files:d,activateModal:this.activateModal,removeTag:this.removeTag,openFile:this.openFile}),0===d.length&&n.a.createElement("article",{class:"message"},n.a.createElement("div",{class:"message-header"},"Looks like there aren't any files here."),0===this.state.clickedTags.size&&n.a.createElement("div",{class:"message-body"},"You can add some by clicking Add Files on the top right or just download something from Chrome!"),this.state.clickedTags.size>0&&n.a.createElement("div",{class:"message-body"},"No files match your selected fabels :(")))),n.a.createElement(g,{active:this.state.modal.active,close:this.closeModal},n.a.createElement("div",{className:"container is-fluid has-text-centered"},n.a.createElement("div",{className:"field has-addons"},n.a.createElement("div",{className:"control is-expanded"},n.a.createElement("input",{onKeyPress:function(t){"Enter"===t.key&&e.addTag(e.state.modal.fileId,e.state.modal.textField)},ref:function(e){return e&&e.focus()},className:"input is-focused",type:"text",placeholder:"New Tag",value:this.state.modal.textField,onChange:function(t){return e.updateModalInputValue(t)}})),n.a.createElement("div",{className:"control"},n.a.createElement("a",{className:"button is-info",onClick:function(){e.addTag(e.state.modal.fileId,e.state.modal.textField)}},"Add"))))),n.a.createElement("div",{onDragOver:this.onDragOver,onDrop:this.onDropped},n.a.createElement(g,{active:this.state.fileModal.active,close:this.closeFileModal},n.a.createElement("div",{className:"container is-fluid has-text-centered"},n.a.createElement("p",null,"Drop files here.")))))}}]),t}(n.a.Component);i.a.render(n.a.createElement(w,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.d1bd8396.chunk.js.map